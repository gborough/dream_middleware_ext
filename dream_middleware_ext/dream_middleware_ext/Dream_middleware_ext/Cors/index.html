<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Cors (dream_middleware_ext.Dream_middleware_ext.Cors)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">dream_middleware_ext</a> &#x00BB; <a href="../index.html">Dream_middleware_ext</a> &#x00BB; Cors</nav><header class="odoc-preamble"><h1>Module <code><span>Dream_middleware_ext.Cors</span></code></h1><p>Cross-Origin Resource Sharing(CORS) middleware</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-cors_conf"><a href="#type-cors_conf" class="anchor"></a><code><span><span class="keyword">type</span> cors_conf</span></code></div><div class="spec-doc"><p>The type of configuration for CORS</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-allowed_origin_type"><a href="#type-allowed_origin_type" class="anchor"></a><code><span><span class="keyword">type</span> allowed_origin_type</span><span> = </span></code><ol><li id="type-allowed_origin_type.WildCard" class="def variant constructor anchored"><a href="#type-allowed_origin_type.WildCard" class="anchor"></a><code><span>| </span><span><span class="constructor">WildCard</span></span></code></li><li id="type-allowed_origin_type.OriginUrl" class="def variant constructor anchored"><a href="#type-allowed_origin_type.OriginUrl" class="anchor"></a><code><span>| </span><span><span class="constructor">OriginUrl</span> <span class="keyword">of</span> <a href="#type-credential_perm">credential_perm</a> * string</span></code></li><li id="type-allowed_origin_type.OriginUrlFn" class="def variant constructor anchored"><a href="#type-allowed_origin_type.OriginUrlFn" class="anchor"></a><code><span>| </span><span><span class="constructor">OriginUrlFn</span> <span class="keyword">of</span> <a href="#type-credential_perm">credential_perm</a> * <a href="#type-string_fn">string_fn</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The type of Access-Control-Allow-Origin and Access-Control-Allow-Credentials combinations: 1. WildCard -&gt; i.e. &quot;*&quot;, which allows all origins and permits no credentials 2. OriginUrl -&gt; single origin with credential permission 3. OriginUrlFn -&gt; a function type that returns a single origin with credential permission</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-credential_perm"><a href="#type-credential_perm" class="anchor"></a><code><span><span class="keyword">and</span> credential_perm</span><span> = </span></code><ol><li id="type-credential_perm.Allow" class="def variant constructor anchored"><a href="#type-credential_perm.Allow" class="anchor"></a><code><span>| </span><span><span class="constructor">Allow</span></span></code></li><li id="type-credential_perm.Disallow" class="def variant constructor anchored"><a href="#type-credential_perm.Disallow" class="anchor"></a><code><span>| </span><span><span class="constructor">Disallow</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The type for allowing or disallowing Access-Control-Allow-Credentials</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-string_fn"><a href="#type-string_fn" class="anchor"></a><code><span><span class="keyword">and</span> string_fn</span><span> = <span>unit <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Function type that returns a single origin, i.e. matching on multiple origins</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-InvalidOrigin"><a href="#exception-InvalidOrigin" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">InvalidOrigin</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-InvalidMethod"><a href="#exception-InvalidMethod" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">InvalidMethod</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-InvalidMaxAge"><a href="#exception-InvalidMaxAge" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">InvalidMaxAge</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-InvalidAllowedHeaders"><a href="#exception-InvalidAllowedHeaders" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">InvalidAllowedHeaders</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-InvalidExposeHeaders"><a href="#exception-InvalidExposeHeaders" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">InvalidExposeHeaders</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-cors_error"><a href="#type-cors_error" class="anchor"></a><code><span><span class="keyword">type</span> cors_error</span><span> = </span></code><ol><li id="type-cors_error.OriginNotAllowed" class="def variant constructor anchored"><a href="#type-cors_error.OriginNotAllowed" class="anchor"></a><code><span>| </span><span><span class="constructor">OriginNotAllowed</span></span></code></li><li id="type-cors_error.MissingOrigin" class="def variant constructor anchored"><a href="#type-cors_error.MissingOrigin" class="anchor"></a><code><span>| </span><span><span class="constructor">MissingOrigin</span></span></code></li><li id="type-cors_error.MissingMethods" class="def variant constructor anchored"><a href="#type-cors_error.MissingMethods" class="anchor"></a><code><span>| </span><span><span class="constructor">MissingMethods</span></span></code></li><li id="type-cors_error.MissingHeaders" class="def variant constructor anchored"><a href="#type-cors_error.MissingHeaders" class="anchor"></a><code><span>| </span><span><span class="constructor">MissingHeaders</span></span></code></li><li id="type-cors_error.MethodsNotAllowed" class="def variant constructor anchored"><a href="#type-cors_error.MethodsNotAllowed" class="anchor"></a><code><span>| </span><span><span class="constructor">MethodsNotAllowed</span></span></code></li><li id="type-cors_error.HeadersNotAllowed" class="def variant constructor anchored"><a href="#type-cors_error.HeadersNotAllowed" class="anchor"></a><code><span>| </span><span><span class="constructor">HeadersNotAllowed</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The type of CORS errors</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-all_verbs_header"><a href="#val-all_verbs_header" class="anchor"></a><code><span><span class="keyword">val</span> all_verbs_header : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>Helper function to make a header list of all http verbs.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-non_preflight_headers"><a href="#val-non_preflight_headers" class="anchor"></a><code><span><span class="keyword">val</span> non_preflight_headers : <span><span class="xref-unresolved">Dream</span>.request <span class="arrow">&#45;&gt;</span></span> <span><span>(string * string)</span> list</span></span></code></div><div class="spec-doc"><p>Helper function to return CORS relevant headers in non-preflight response.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_cors_conf"><a href="#val-make_cors_conf" class="anchor"></a><code><span><span class="keyword">val</span> make_cors_conf : 
  <span><span class="label">allowed_origin</span>:<a href="#type-allowed_origin_type">allowed_origin_type</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">allowed_methods</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">allowed_headers</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">expose_headers</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_age</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?preflight</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?set_vary_header</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-cors_conf">cors_conf</a></span></code></div><div class="spec-doc"><p><code>make_cors_conf args...</code> makes a CORS configuration.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_cors"><a href="#val-make_cors" class="anchor"></a><code><span><span class="keyword">val</span> make_cors : 
  <span><a href="#type-cors_conf">cors_conf</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Dream</span>.handler <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Dream</span>.request <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Dream</span>.response <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>make_cors cors_conf</code> takes a CORS configuration and makes a CORS middleware</p></div></div></div></body></html>
